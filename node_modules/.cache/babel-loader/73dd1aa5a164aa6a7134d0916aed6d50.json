{"ast":null,"code":"var _jsxFileName = \"/Users/zhangzirao/Desktop/website/Archive/src/component/Album.js\";\nimport React, { Component, useCallback } from 'react'; // import Dimensions from 'react-dimensions';\n\nimport Img from './Img';\nimport CarouselPage from './Carousel';\nimport { Card, Carousel, CardDeck, Col, Row } from 'react-bootstrap';\nimport Gallery from \"react-photo-gallery\"; // import Carousel, { Modal, ModalGateway } from 'react-images';\n\nclass Album extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: null,\n      id: null,\n      type: null,\n      generalwidth: null,\n      index: 0,\n      open: false\n    };\n    this.myInput = React.createRef();\n    this.handleClick = this.handleClick.bind(this);\n    this.closeLightbox = this.closeLightbox.bind(this);\n  }\n\n  getdata() {\n    let mycomp = this;\n    fetch('/data/data.json').then(function (response) {\n      return response.json();\n    }).then(function (responseData) {\n      // console.log(responseData)\n      mycomp.setState({\n        data: responseData[mycomp.state.type]\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.type !== nextProps.type) {\n      console.log(this.props.type);\n      this.setState({\n        type: nextProps.type\n      });\n      this.getdata();\n    }\n  }\n\n  componentDidMount() {\n    var _id = this.props.match.params.id;\n    this.setState({\n      id: _id,\n      type: this.props.type\n    });\n    this.getdata();\n    this.setState({\n      generalwidth: this.myInput.current.offsetWidth\n    });\n  }\n\n  handleClick(_index) {\n    // console.log(\"test\",_index)\n    this.setState({\n      index: _index,\n      open: true\n    });\n  }\n\n  closeLightbox() {\n    this.setState({\n      index: 0,\n      open: false\n    });\n  }\n\n  render() {\n    var items, i, sf, namefont;\n    items = [];\n    sf = {\n      \"name\": \"Unknown\",\n      \"column\": 0\n    }; // console.log(this.state.data)\n\n    if (this.state.data !== null) {\n      for (i = 0; i < this.state.data.content.length; i++) {\n        console.log(this.state.data.content[i].id, parseInt(this.state.id, 10));\n\n        if (this.state.data.content[i].id === parseInt(this.state.id, 10)) {\n          sf = this.state.data.content[i];\n          namefont = sf.font.name;\n          var columnnum = sf.column;\n          var j;\n\n          for (j = 0; j < sf.pics.length; j++) {\n            var imgitem;\n\n            if (this.state.generalwidth === null) {\n              // imgitem = (<Img key={j} onClick={this.handleClick} index={j} src={sf.pics[j].src} style={{borderColor:\"black\",width:\"100%\"}} />)\n              imgitem = {\n                'src': sf.pics[j].src,\n                'width': 1,\n                'height': sf.pics[j].ratio\n              };\n            } else {\n              console.log(j, window.innerWidth, window.innerHeight, this.myInput.current.offsetWidth, this.state.generalwidth / columnnum, this.state.generalwidth / columnnum / sf.pics[j].ratio); // if(sf.pics[j].large==\"true\"){\n              //     imgitem = (<Img key={j} onClick={this.handleClick} index={j} src={sf.pics[j].src} style={{padding:\"5px 5px 5px 5px\",width:this.state.generalwidth, height:this.state.generalwidth/sf.pics[j].ratio}} />)\n              // }else{\n              //     imgitem = (<Img key={j} onClick={this.handleClick} index={j} src={sf.pics[j].src} style={{padding:\"5px 5px 5px 5px\",width:this.state.generalwidth/columnnum, height:this.state.generalwidth/columnnum/sf.pics[j].ratio}} />)\n              // }\n\n              imgitem = {\n                'src': sf.pics[j].src,\n                'width': 1,\n                'height': sf.pics[j].ratio\n              };\n            }\n\n            items.push(imgitem);\n          }\n\n          break;\n        }\n      }\n    } else {\n      namefont = \"\";\n    }\n\n    console.log(this.state.index);\n    return /*#__PURE__*/React.createElement(Row, {\n      style: {\n        minHeight: \"80vh\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      ref: this.myInput,\n      style: {\n        borderColor: \"black\"\n      },\n      xs: 10,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Gallery, {\n      photos: items,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 25\n      }\n    })));\n  }\n\n}\n\n;\nexport default Album;","map":{"version":3,"sources":["/Users/zhangzirao/Desktop/website/Archive/src/component/Album.js"],"names":["React","Component","useCallback","Img","CarouselPage","Card","Carousel","CardDeck","Col","Row","Gallery","Album","constructor","props","state","data","id","type","generalwidth","index","open","myInput","createRef","handleClick","bind","closeLightbox","getdata","mycomp","fetch","then","response","json","responseData","setState","catch","error","console","log","componentWillReceiveProps","nextProps","componentDidMount","_id","match","params","current","offsetWidth","_index","render","items","i","sf","namefont","content","length","parseInt","font","name","columnnum","column","j","pics","imgitem","src","ratio","window","innerWidth","innerHeight","push","minHeight","justifyContent","alignItems","borderColor"],"mappings":"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","sourcesContent":["import React, { Component, useCallback } from 'react';\n// import Dimensions from 'react-dimensions';\nimport Img from './Img'\nimport CarouselPage from './Carousel'\nimport {Card, Carousel, CardDeck, Col, Row} from 'react-bootstrap';\nimport Gallery from \"react-photo-gallery\";\n\n// import Carousel, { Modal, ModalGateway } from 'react-images';\n\nclass Album extends Component {\n    constructor(props){\n        super(props);\n\n        this.state={\n            data:null,\n            id:null,\n            type:null,\n            generalwidth:null,\n            index:0,\n            open:false,\n        }\n\n        this.myInput=React.createRef()\n        this.handleClick=this.handleClick.bind(this)\n        this.closeLightbox=this.closeLightbox.bind(this)\n    }\n\n    getdata(){\n        let mycomp = this;\n        fetch('/data/data.json').then(\n            function(response){\n                return response.json()\n            }\n        ).then(\n            function(responseData){\n                // console.log(responseData)\n                mycomp.setState({data:responseData[mycomp.state.type]})\n            }\n        ).catch(\n            function(error){\n                console.log(error)\n            }\n        )\n    }\n\n    componentWillReceiveProps(nextProps){\n        if(this.props.type !== nextProps.type){\n            console.log(this.props.type)\n            this.setState({type:nextProps.type})\n            this.getdata()\n        }\n    }\n\n    componentDidMount(){\n        var _id = this.props.match.params.id\n        this.setState({id:_id, type:this.props.type})\n        this.getdata()\n        this.setState({generalwidth:this.myInput.current.offsetWidth})\n    }\n\n    handleClick(_index){\n        // console.log(\"test\",_index)\n        this.setState({index:_index, open:true})\n    }\n\n    closeLightbox(){\n        this.setState({index:0, open:false})\n    }\n\n    render(){\n        var items,i,sf,namefont;\n        items=[];\n        sf = {\n            \"name\":\"Unknown\",\n            \"column\":0\n        }\n        // console.log(this.state.data)\n        \n        if(this.state.data !== null){\n            \n            for(i=0;i<this.state.data.content.length;i++){\n                console.log(this.state.data.content[i].id,parseInt(this.state.id,10))\n                if(this.state.data.content[i].id === parseInt(this.state.id,10)){\n                    sf = this.state.data.content[i]\n                    namefont=sf.font.name\n\n                    var columnnum = sf.column\n\n                    var j;\n                    \n\n                    for (j=0;j<sf.pics.length;j++){\n                        var imgitem\n                        if(this.state.generalwidth === null){\n                            // imgitem = (<Img key={j} onClick={this.handleClick} index={j} src={sf.pics[j].src} style={{borderColor:\"black\",width:\"100%\"}} />)\n                            imgitem = {'src':sf.pics[j].src, 'width':1, 'height':sf.pics[j].ratio}\n                        }else{\n                            console.log(j,window.innerWidth, window.innerHeight, this.myInput.current.offsetWidth, this.state.generalwidth/columnnum, this.state.generalwidth/columnnum/sf.pics[j].ratio)\n                            // if(sf.pics[j].large==\"true\"){\n                            //     imgitem = (<Img key={j} onClick={this.handleClick} index={j} src={sf.pics[j].src} style={{padding:\"5px 5px 5px 5px\",width:this.state.generalwidth, height:this.state.generalwidth/sf.pics[j].ratio}} />)\n                            // }else{\n                            //     imgitem = (<Img key={j} onClick={this.handleClick} index={j} src={sf.pics[j].src} style={{padding:\"5px 5px 5px 5px\",width:this.state.generalwidth/columnnum, height:this.state.generalwidth/columnnum/sf.pics[j].ratio}} />)\n                            // }\n                            imgitem = {'src':sf.pics[j].src, 'width':1, 'height':sf.pics[j].ratio}\n                        }\n                        items.push(\n                            imgitem\n                        )\n                    }\n                    break;\n                }\n            }\n        }else{\n            namefont = \"\"\n        }\n        console.log(this.state.index)\n        return (\n                <Row style={{minHeight:\"80vh\", justifyContent:\"center\",alignItems:\"center\"}}>\n                    <Col ref={this.myInput} style={{borderColor:\"black\"}} xs={10}>\n                    {/* {this.state.open ? (\n                            <div>\n                            <CarouselPage index={this.state.index} data={sf} />\n                            <button onClick={this.closeLightbox}>back</button>\n                            </div>\n                            \n                        ) : (\n                            \n                            <CardDeck >\n                                {items}\n                            </CardDeck>\n                            \n                        )} */}\n                        <Gallery photos={items}/>\n                    </Col>\n                </Row>\n            \n        )\n        \n        \n    }\n};\n\nexport default Album;"]},"metadata":{},"sourceType":"module"}